---
import Image from "astro/components/Image.astro";
interface Props {
  title?: string;
  name: string;
  position: string;
  imageSrc: ImageMetadata;
  imageWidth: string;
  id: string;
}

const { title, name, position, imageSrc, imageWidth, id } = Astro.props;
---

<article
  class="speaker mt-13 max-w-104.5 grid grid-rows-subgrid gap-0 row-span-5 justify-self-center relative"
>
  {
    title && (
      <p class="title absolute -top-13 text-lg">{title}</p>
    )
  }
  <Image
    src={imageSrc}
    alt={name}
    loading={"lazy"}
    class=`${imageWidth} place-self-end`
  />
  <h3 class="pb-2 mx-8.5 mb-5 text-[1.625rem]/6.5 relative whitespace-pre-wrap">{name}
    <span
      class="absolute bg-btg-3 w-65 h-1.25 bottom-0 left-0"
      aria-hidden="true"></span>
  </h3>
  <p class="font-light text-[1.375rem]/5.5 mx-8.5 mb-7 text-btg-075">{position}</p>
  <button commandfor={id} command="show-modal" class="button">
    Ver m√°s</button
  >
</article>

<dialog id={id} closedby="any" class="dialog">
  <form method="dialog" class="absolute top-3 right-3">
    <button
      class="appearance-none text-2xl/0 text-white font-bold cursor-pointer"
    >
      x
    </button>
  </form>
    <div class="w-60 shrink-0">
      <Image src={imageSrc} alt={name} width={240} />
      <h3
        class="pb-4 mb-5 text-[2rem]/8 relative whitespace-pre-wrap text-white"
      >{name}
        <span
          class="absolute bg-btg-3 w-55 h-1.25 bottom-0 left-0"
          aria-hidden="true"></span>
      </h3>
      <p class="font-light text-xl/5 text-btg-075">{position}</p>
    </div>
    <div class="place-self-center">
      <slot />
    </div>
</dialog>

<style>
  .speaker:nth-of-type(2) {
    margin-top: 102px;

    @media (min-width: 1024px) {
      margin-top: 52px;
    }
  }

  .button {
    background-color: var(--color-btg-2);
    color: #fff;
    cursor: pointer;
    font-size: 1.75rem;
    font-weight: 600;
    height: 50px;
    letter-spacing: -1px;
    margin-left: 34px;
    position: relative;
    transition: all 0.2s ease-in-out;
    width: 226px;

    &:hover {
      background-color: var(--color-btg-3);
    }
  }

  .dialog {
    background-color: var(--color-btg-6);
    flex-wrap: wrap;
    gap: 30px;
    padding: 30px 22px;
    margin-block: auto;
    margin-inline: 10px;
    max-width: 600px;
    transition: all 0.6s ease-in-out allow-discrete;

    @media (min-width: 768px) {
      flex-wrap: nowrap;
      margin-inline: auto;
    }

    @supports (-webkit-appearance: none) and (stroke-color: transparent) {
      opacity: unset;
      transform: unset;
    }

    &[open] {
      display: flex;
      opacity: 100;
    }

    @starting-style {
      &[open] {
        opacity: 0;
      }
    }

    &::backdrop {
      background-color: #000;
      opacity: 0;
      transition: all 0.6s allow-discrete;
    }

    &[open]::backdrop {
      background-color: #000;
      opacity: 0.75;
    }

    @starting-style {
      &[open]::backdrop {
        background-color: #000;
        opacity: 0;
      }
    }
  }
</style>
